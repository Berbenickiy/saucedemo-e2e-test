Создайте и Активируйте Виртуальное Окружение
Windows PowerShell
python -m venv venv
venv\Scripts\activate

Установите Зависимости
pip install -r requirements.txt

Запустите Тест
python tests/test_purchase.py





Описание
1. Импорт Необходимых Модулей
unittest:                                 Встроенный фреймворк Python для написания и запуска тестов.
selenium:                                 Библиотека для автоматизации веб-браузеров.
webdriver:                                Модуль из Selenium для управления браузером.
By:                                       Класс из Selenium, содержащий методы для поиска элементов на странице.
ChromeService:                            Класс для настройки службы ChromeDriver.
WebDriverWait и expected_conditions (EC): Для явных ожиданий определённых условий на странице.
TimeoutException:                         Исключение, которое выбрасывается при истечении времени ожидания.


2. Определение Класса Теста
SauceDemoPurchaseTest: Класс, наследующийся от unittest.TestCase, что позволяет использовать методы и функциональность фреймворка unittest для написания тестов.


3. Метод setUp
setUp:                            Метод, который выполняется перед каждым тестовым методом. Используется для подготовки среды тестирования.
self.driver = webdriver.Chrome(): Инициализация экземпляра Chrome браузера. Убедитесь, что chromedriver находится в вашем PATH или укажите полный путь к нему.
self.driver.maximize_window():    Разворачивает окно браузера на весь экран.
self.driver.implicitly_wait(10):  Устанавливает неявные ожидания в 10 секунд. Это означает, что Selenium будет ждать до 10 секунд, пытаясь найти элемент перед тем, как выбросить исключение NoSuchElementException.
Тестовые данные:                  Определение базового URL сайта, учетных данных пользователя и имени товара, который будет добавлен в корзину.


4. Метод test_purchase_flow
test_purchase_flow:         Основной метод теста, который выполняет все шаги покупки.
driver.get(self.base_url):  Переход на главную страницу сайта saucedemo.com.


Шаг 1: Авторизация
find_element(By.ID, "user-name"):    Находит поле ввода логина по ID и вводит имя пользователя.
find_element(By.ID, "password"):     Находит поле ввода пароля по ID и вводит пароль.
find_element(By.ID, "login-button"): Находит кнопку входа и кликает по ней для отправки формы.


Шаг 2: Проверка Успешной Авторизации
WebDriverWait(driver, 10):        Явное ожидание до 10 секунд.
EC.visibility_of_element_located: Ожидание, пока элемент с классом inventory_list станет видимым. Наличие этого элемента свидетельствует о том, что пользователь успешно вошёл в систему и перенаправлен на страницу товаров.
print:                            Вывод сообщения в консоль при успешной авторизации.
except TimeoutException:          Если элемент не появляется в течение 10 секунд, тест проваливается с сообщением "Авторизация не удалась."


Шаг 3: Выбор и Добавление Товара в Корзину
find_elements(By.CLASS_NAME, "inventory_item"):        Находит все элементы товаров на странице.
Цикл for:                                              Проходит по каждому товару и проверяет его название.
title == self.product_name:                            Проверяет, совпадает ли название товара с заданным ("Sauce Labs Backpack").
product.find_element(By.TAG_NAME, "button").click():   Находит кнопку "Add to cart" внутри товара и кликает по ней, добавляя товар в корзину.
print:                                                 Вывод сообщения о добавлении товара в корзину.
break:                                                 Прерывает цикл после нахождения и добавления нужного товара.
if not product_found:                                  Если товар не был найден, тест проваливается с соответствующим сообщением.


Шаг 4: Переход в Корзину и Проверка Добавления Товара
find_element(By.CLASS_NAME, "shopping_cart_link").click():  Находит и кликает по иконке корзины для перехода на страницу корзины.
WebDriverWait + EC.text_to_be_present_in_element:           Явное ожидание появления текста товара в корзине, что подтверждает успешное добавление.
print:                                                      Вывод сообщения о успешном добавлении товара.
except TimeoutException:                                    Если текст не появляется в течение 10 секунд, тест проваливается.


Шаг 5: Оформление Покупки
find_element(By.ID, "checkout").click():  Кликает по кнопке "Checkout" для начала оформления заказа.
Заполнение форм:
first-name:  Вводит имя покупателя.
last-name:   Вводит фамилию покупателя.
postal-code: Вводит почтовый индекс.
find_element(By.ID, "continue").click():  Кликает по кнопке "Continue" для продолжения процесса оформления.


Шаг 6: Проверка Нахождения на Странице Обзора Заказа
WebDriverWait + EC.visibility_of_element_located:  Ожидание появления элемента с классом summary_info, который присутствует на странице обзора заказа.
print:                                             Вывод сообщения о нахождении на странице обзора заказа.
except TimeoutException:                           Если элемент не появляется, тест проваливается.


Шаг 7: Завершение Покупки и Проверка Успешного Завершения
find_element(By.ID, "finish").click():             Кликает по кнопке "Finish" для завершения оформления заказа.
WebDriverWait + EC.visibility_of_element_located:  Ожидание появления элемента с классом complete-header, который содержит сообщение о завершении заказа.
success_message = ...:                             Получает текст из элемента complete-header.
self.assertEqual:                                  Сравнивает полученное сообщение с ожидаемым "Thank you for your order!". Если они совпадают, тест считается пройденным.
print:                                             Вывод сообщения о успешном завершении покупки.
except TimeoutException:                           Если сообщение не появляется, тест проваливается.


5. Метод tearDown
tearDown:            Метод, который выполняется после каждого тестового метода. Используется для очистки среды тестирования.
self.driver.quit():  Закрывает браузер и завершает сессию WebDriver. Это важно для освобождения ресурсов и предотвращения утечек памяти.


6. Запуск Теста
if name == "main"::  Проверяет, запускается ли скрипт напрямую.
unittest.main():     Запускает тесты, определённые в классе SauceDemoPurchaseTest.
